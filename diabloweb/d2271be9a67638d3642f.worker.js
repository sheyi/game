!function(n){var t={};function e(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=n,e.c=t,e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:r})},e.r=function(n){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"===typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var i in n)e.d(r,i,function(t){return n[t]}.bind(null,i));return r},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="/diabloweb/",e(e.s=35)}([function(n,t,e){"use strict";var r=e(5),i=e(20),o=Object.prototype.toString;function a(n){return"[object Array]"===o.call(n)}function u(n){return null!==n&&"object"===typeof n}function s(n){return"[object Function]"===o.call(n)}function c(n,t){if(null!==n&&"undefined"!==typeof n)if("object"!==typeof n&&(n=[n]),a(n))for(var e=0,r=n.length;e<r;e++)t.call(null,n[e],e,n);else for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.call(null,n[i],i,n)}n.exports={isArray:a,isArrayBuffer:function(n){return"[object ArrayBuffer]"===o.call(n)},isBuffer:i,isFormData:function(n){return"undefined"!==typeof FormData&&n instanceof FormData},isArrayBufferView:function(n){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(n):n&&n.buffer&&n.buffer instanceof ArrayBuffer},isString:function(n){return"string"===typeof n},isNumber:function(n){return"number"===typeof n},isObject:u,isUndefined:function(n){return"undefined"===typeof n},isDate:function(n){return"[object Date]"===o.call(n)},isFile:function(n){return"[object File]"===o.call(n)},isBlob:function(n){return"[object Blob]"===o.call(n)},isFunction:s,isStream:function(n){return u(n)&&s(n.pipe)},isURLSearchParams:function(n){return"undefined"!==typeof URLSearchParams&&n instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!==typeof window&&"undefined"!==typeof document},forEach:c,merge:function n(){var t={};function e(e,r){"object"===typeof t[r]&&"object"===typeof e?t[r]=n(t[r],e):t[r]=e}for(var r=0,i=arguments.length;r<i;r++)c(arguments[r],e);return t},deepMerge:function n(){var t={};function e(e,r){"object"===typeof t[r]&&"object"===typeof e?t[r]=n(t[r],e):t[r]="object"===typeof e?n({},e):e}for(var r=0,i=arguments.length;r<i;r++)c(arguments[r],e);return t},extend:function(n,t,e){return c(t,function(t,i){n[i]=e&&"function"===typeof t?r(t,e):t}),n},trim:function(n){return n.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(n,t,e){n.exports=e(18)},function(n,t){var e,r,i=n.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(n){if(e===setTimeout)return setTimeout(n,0);if((e===o||!e)&&setTimeout)return e=setTimeout,setTimeout(n,0);try{return e(n,0)}catch(t){try{return e.call(null,n,0)}catch(t){return e.call(this,n,0)}}}!function(){try{e="function"===typeof setTimeout?setTimeout:o}catch(n){e=o}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(n){r=a}}();var s,c=[],l=!1,_=-1;function f(){l&&s&&(l=!1,s.length?c=s.concat(c):_=-1,c.length&&p())}function p(){if(!l){var n=u(f);l=!0;for(var t=c.length;t;){for(s=c,c=[];++_<t;)s&&s[_].run();_=-1,t=c.length}s=null,l=!1,function(n){if(r===clearTimeout)return clearTimeout(n);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(n);try{r(n)}catch(t){try{return r.call(null,n)}catch(t){return r.call(this,n)}}}(n)}}function d(n,t){this.fun=n,this.array=t}function m(){}i.nextTick=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];c.push(new d(n,t)),1!==c.length||l||u(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(n){return[]},i.binding=function(n){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(n){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(n,t){},function(n,t,e){(function(n){function e(n,t){for(var e=0,r=n.length-1;r>=0;r--){var i=n[r];"."===i?n.splice(r,1):".."===i?(n.splice(r,1),e++):e&&(n.splice(r,1),e--)}if(t)for(;e--;e)n.unshift("..");return n}function r(n,t){if(n.filter)return n.filter(t);for(var e=[],r=0;r<n.length;r++)t(n[r],r,n)&&e.push(n[r]);return e}t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:n.cwd();if("string"!==typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,i="/"===a.charAt(0))}return(i?"/":"")+(t=e(r(t.split("/"),function(n){return!!n}),!i).join("/"))||"."},t.normalize=function(n){var o=t.isAbsolute(n),a="/"===i(n,-1);return(n=e(r(n.split("/"),function(n){return!!n}),!o).join("/"))||o||(n="."),n&&a&&(n+="/"),(o?"/":"")+n},t.isAbsolute=function(n){return"/"===n.charAt(0)},t.join=function(){var n=Array.prototype.slice.call(arguments,0);return t.normalize(r(n,function(n,t){if("string"!==typeof n)throw new TypeError("Arguments to path.join must be strings");return n}).join("/"))},t.relative=function(n,e){function r(n){for(var t=0;t<n.length&&""===n[t];t++);for(var e=n.length-1;e>=0&&""===n[e];e--);return t>e?[]:n.slice(t,e-t+1)}n=t.resolve(n).substr(1),e=t.resolve(e).substr(1);for(var i=r(n.split("/")),o=r(e.split("/")),a=Math.min(i.length,o.length),u=a,s=0;s<a;s++)if(i[s]!==o[s]){u=s;break}var c=[];for(s=u;s<i.length;s++)c.push("..");return(c=c.concat(o.slice(u))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(n){if("string"!==typeof n&&(n+=""),0===n.length)return".";for(var t=n.charCodeAt(0),e=47===t,r=-1,i=!0,o=n.length-1;o>=1;--o)if(47===(t=n.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?e?"/":".":e&&1===r?"/":n.slice(0,r)},t.basename=function(n,t){var e=function(n){"string"!==typeof n&&(n+="");var t,e=0,r=-1,i=!0;for(t=n.length-1;t>=0;--t)if(47===n.charCodeAt(t)){if(!i){e=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":n.slice(e,r)}(n);return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e},t.extname=function(n){"string"!==typeof n&&(n+="");for(var t=-1,e=0,r=-1,i=!0,o=0,a=n.length-1;a>=0;--a){var u=n.charCodeAt(a);if(47!==u)-1===r&&(i=!1,r=a+1),46===u?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){e=a+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===e+1?"":n.slice(t,r)};var i="b"==="ab".substr(-1)?function(n,t,e){return n.substr(t,e)}:function(n,t,e){return t<0&&(t=n.length+t),n.substr(t,e)}}).call(this,e(2))},function(n,t,e){"use strict";n.exports=function(n,t){return function(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];return n.apply(t,e)}}},function(n,t,e){"use strict";var r=e(0);function i(n){return encodeURIComponent(n).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}n.exports=function(n,t,e){if(!t)return n;var o;if(e)o=e(t);else if(r.isURLSearchParams(t))o=t.toString();else{var a=[];r.forEach(t,function(n,t){null!==n&&"undefined"!==typeof n&&(r.isArray(n)?t+="[]":n=[n],r.forEach(n,function(n){r.isDate(n)?n=n.toISOString():r.isObject(n)&&(n=JSON.stringify(n)),a.push(i(t)+"="+i(n))}))}),o=a.join("&")}if(o){var u=n.indexOf("#");-1!==u&&(n=n.slice(0,u)),n+=(-1===n.indexOf("?")?"?":"&")+o}return n}},function(n,t,e){"use strict";n.exports=function(n){return!(!n||!n.__CANCEL__)}},function(n,t,e){"use strict";(function(t){var r=e(0),i=e(25),o={"Content-Type":"application/x-www-form-urlencoded"};function a(n,t){!r.isUndefined(n)&&r.isUndefined(n["Content-Type"])&&(n["Content-Type"]=t)}var u={adapter:function(){var n;return"undefined"!==typeof t&&"[object process]"===Object.prototype.toString.call(t)?n=e(9):"undefined"!==typeof XMLHttpRequest&&(n=e(9)),n}(),transformRequest:[function(n,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(n)||r.isArrayBuffer(n)||r.isBuffer(n)||r.isStream(n)||r.isFile(n)||r.isBlob(n)?n:r.isArrayBufferView(n)?n.buffer:r.isURLSearchParams(n)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),n.toString()):r.isObject(n)?(a(t,"application/json;charset=utf-8"),JSON.stringify(n)):n}],transformResponse:[function(n){if("string"===typeof n)try{n=JSON.parse(n)}catch(t){}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],function(n){u.headers[n]={}}),r.forEach(["post","put","patch"],function(n){u.headers[n]=r.merge(o)}),n.exports=u}).call(this,e(2))},function(n,t,e){"use strict";var r=e(0),i=e(26),o=e(6),a=e(28),u=e(29),s=e(10);n.exports=function(n){return new Promise(function(t,c){var l=n.data,_=n.headers;r.isFormData(l)&&delete _["Content-Type"];var f=new XMLHttpRequest;if(n.auth){var p=n.auth.username||"",d=n.auth.password||"";_.Authorization="Basic "+btoa(p+":"+d)}if(f.open(n.method.toUpperCase(),o(n.url,n.params,n.paramsSerializer),!0),f.timeout=n.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in f?a(f.getAllResponseHeaders()):null,r={data:n.responseType&&"text"!==n.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:e,config:n,request:f};i(t,c,r),f=null}},f.onabort=function(){f&&(c(s("Request aborted",n,"ECONNABORTED",f)),f=null)},f.onerror=function(){c(s("Network Error",n,null,f)),f=null},f.ontimeout=function(){c(s("timeout of "+n.timeout+"ms exceeded",n,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var m=e(30),y=(n.withCredentials||u(n.url))&&n.xsrfCookieName?m.read(n.xsrfCookieName):void 0;y&&(_[n.xsrfHeaderName]=y)}if("setRequestHeader"in f&&r.forEach(_,function(n,t){"undefined"===typeof l&&"content-type"===t.toLowerCase()?delete _[t]:f.setRequestHeader(t,n)}),n.withCredentials&&(f.withCredentials=!0),n.responseType)try{f.responseType=n.responseType}catch(h){if("json"!==n.responseType)throw h}"function"===typeof n.onDownloadProgress&&f.addEventListener("progress",n.onDownloadProgress),"function"===typeof n.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",n.onUploadProgress),n.cancelToken&&n.cancelToken.promise.then(function(n){f&&(f.abort(),c(n),f=null)}),void 0===l&&(l=null),f.send(l)})}},function(n,t,e){"use strict";var r=e(27);n.exports=function(n,t,e,i,o){var a=new Error(n);return r(a,t,e,i,o)}},function(n,t,e){"use strict";var r=e(0);n.exports=function(n,t){t=t||{};var e={};return r.forEach(["url","method","params","data"],function(n){"undefined"!==typeof t[n]&&(e[n]=t[n])}),r.forEach(["headers","auth","proxy"],function(i){r.isObject(t[i])?e[i]=r.deepMerge(n[i],t[i]):"undefined"!==typeof t[i]?e[i]=t[i]:r.isObject(n[i])?e[i]=r.deepMerge(n[i]):"undefined"!==typeof n[i]&&(e[i]=n[i])}),r.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(r){"undefined"!==typeof t[r]?e[r]=t[r]:"undefined"!==typeof n[r]&&(e[r]=n[r])}),e}},function(n,t,e){"use strict";function r(n){this.message=n}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,n.exports=r},function(n,t,e){n.exports=e.p+"static/media/Diablo.570bd59a.wasm"},function(n,t,e){(function(t,r){var i=function(){var n="undefined"!==typeof document&&document.currentScript?document.currentScript.src:void 0;return function(i){var o,a="undefined"!==typeof(i=i||{})?i:{},u={};for(o in a)a.hasOwnProperty(o)&&(u[o]=a[o]);a.arguments=[],a.thisProgram="./this.program",a.quit=function(n,t){throw t},a.preRun=[],a.postRun=[];var s,c,l=!1,_=!1;l="object"===typeof window,_="function"===typeof importScripts,s="object"===typeof t&&"object"===typeof t.versions&&"string"===typeof t.versions.node&&!l&&!_,c=!l&&!s&&!_;var f,p,d,m,y="";s?(y=r+"/",f=function(n,t){var r;return d||(d=e(3)),m||(m=e(4)),n=m.normalize(n),r=d.readFileSync(n),t?r:r.toString()},p=function(n){var t=f(n,!0);return t.buffer||(t=new Uint8Array(t)),j(t.buffer),t},t.argv.length>1&&(a.thisProgram=t.argv[1].replace(/\\/g,"/")),a.arguments=t.argv.slice(2),t.on("uncaughtException",function(n){if(!(n instanceof Un))throw n}),t.on("unhandledRejection",Bn),a.quit=function(n){t.exit(n)},a.inspect=function(){return"[Emscripten Module object]"}):c?("undefined"!=typeof read&&(f=function(n){return read(n)}),p=function(n){var t;return"function"===typeof readbuffer?new Uint8Array(readbuffer(n)):(j("object"===typeof(t=read(n,"binary"))),t)},"undefined"!=typeof scriptArgs?a.arguments=scriptArgs:"undefined"!=typeof arguments&&(a.arguments=arguments),"function"===typeof quit&&(a.quit=function(n){quit(n)})):(l||_)&&(_?y=self.location.href:document.currentScript&&(y=document.currentScript.src),n&&(y=n),y=0!==y.indexOf("blob:")?y.substr(0,y.lastIndexOf("/")+1):"",f=function(n){var t=new XMLHttpRequest;return t.open("GET",n,!1),t.send(null),t.responseText},_&&(p=function(n){var t=new XMLHttpRequest;return t.open("GET",n,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),function(n,t,e){var r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):e()},r.onerror=e,r.send(null)});var h=a.print||("undefined"!==typeof console?console.log.bind(console):"undefined"!==typeof print?print:null),v=a.printErr||("undefined"!==typeof printErr?printErr:"undefined"!==typeof console&&console.warn.bind(console)||h);for(o in u)u.hasOwnProperty(o)&&(a[o]=u[o]);u=void 0;var g={"f64-rem":function(n,t){return n%t},debugger:function(){}};new Array(0);var b,w=0,x=function(n){w=n};"object"!==typeof WebAssembly&&v("no native wasm support detected");var A=!1;function j(n,t){n||Bn("Assertion failed: "+t)}var C="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;function S(n,t,e){for(var r=t+e,i=t;n[i]&&!(i>=r);)++i;if(i-t>16&&n.subarray&&C)return C.decode(n.subarray(t,i));for(var o="";t<i;){var a=n[t++];if(128&a){var u=63&n[t++];if(192!=(224&a)){var s=63&n[t++];if((a=224==(240&a)?(15&a)<<12|u<<6|s:(7&a)<<18|u<<12|s<<6|63&n[t++])<65536)o+=String.fromCharCode(a);else{var c=a-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&a)<<6|u)}else o+=String.fromCharCode(a)}return o}function k(n,t){return n?S(T,n,t):""}"undefined"!==typeof TextDecoder&&new TextDecoder("utf-16le");var E,R,T,D,M;function L(n,t){return n%t>0&&(n+=t-n%t),n}function O(){a.HEAP8=R=new Int8Array(E),a.HEAP16=new Int16Array(E),a.HEAP32=D=new Int32Array(E),a.HEAPU8=T=new Uint8Array(E),a.HEAPU16=new Uint16Array(E),a.HEAPU32=new Uint32Array(E),a.HEAPF32=M=new Float32Array(E),a.HEAPF64=new Float64Array(E)}var P=1875712,I=a.TOTAL_MEMORY||134217728;function N(n){for(;n.length>0;){var t=n.shift();if("function"!=typeof t){var e=t.func;"number"===typeof e?void 0===t.arg?a.dynCall_v(e):a.dynCall_vi(e,t.arg):e(void 0===t.arg?null:t.arg)}else t()}}I<5242880&&v("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+I+"! (TOTAL_STACK=5242880)"),(b=a.wasmMemory?a.wasmMemory:new WebAssembly.Memory({initial:I/65536}))&&(E=b.buffer),I=E.byteLength,O(),D[P>>2]=7118624;var F=[],U=[],q=[],B=[];function W(n){B.unshift(n)}Math.abs,Math.cos,Math.sin,Math.tan,Math.acos,Math.asin,Math.atan,Math.atan2,Math.exp,Math.log,Math.sqrt,Math.ceil,Math.floor,Math.pow,Math.imul,Math.fround,Math.round,Math.min,Math.max,Math.clz32,Math.trunc;var H=0,z=null,G=null;a.preloadedImages={},a.preloadedAudios={};var X="data:application/octet-stream;base64,";function K(n){return String.prototype.startsWith?n.startsWith(X):0===n.indexOf(X)}var Y,Z="Diablo.wasm";function J(){try{if(a.wasmBinary)return new Uint8Array(a.wasmBinary);if(p)return p(Z);throw"both async and sync fetching of the wasm failed"}catch(v){Bn(v)}}function V(n){var t={env:n,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:g};function e(n,t){var e=n.exports;a.asm=e,function(n){if(H--,a.monitorRunDependencies&&a.monitorRunDependencies(H),0==H&&(null!==z&&(clearInterval(z),z=null),G)){var t=G;G=null,t()}}()}function r(n){e(n.instance)}function i(n){return(a.wasmBinary||!l&&!_||"function"!==typeof fetch?new Promise(function(n,t){n(J())}):fetch(Z,{credentials:"same-origin"}).then(function(n){if(!n.ok)throw"failed to load wasm binary file at '"+Z+"'";return n.arrayBuffer()}).catch(function(){return J()})).then(function(n){return WebAssembly.instantiate(n,t)}).then(n,function(n){v("failed to asynchronously prepare wasm: "+n),Bn(n)})}if(H++,a.monitorRunDependencies&&a.monitorRunDependencies(H),a.instantiateWasm)try{return a.instantiateWasm(t,e)}catch(o){return v("Module.instantiateWasm callback failed with error: "+o),!1}return function(){if(a.wasmBinary||"function"!==typeof WebAssembly.instantiateStreaming||K(Z)||"function"!==typeof fetch)return i(r);fetch(Z,{credentials:"same-origin"}).then(function(n){return WebAssembly.instantiateStreaming(n,t).then(r,function(n){v("wasm streaming compile failed: "+n),v("falling back to ArrayBuffer instantiation"),i(r)})})}(),{}}K(Z)||(Y=Z,Z=a.locateFile?a.locateFile(Y,y):y+Y),a.asm=function(n,t,e){return t.memory=b,t.table=new WebAssembly.Table({initial:1116,maximum:1116,element:"anyfunc"}),t.__memory_base=1024,t.__table_base=0,V(t)};var $=[function(n){self.DApi.current_save_id(n)}];U.push({func:function(){bn()}});var Q=1875728;var nn={},tn=[];function en(n){n&&nn[n].refcount++}function rn(n){if(!n||nn[n])return n;for(var t in nn)for(var e=+t,r=nn[e].adjusted,i=r.length,o=0;o<i;o++)if(r[o]===n)return e;return n}var on=0;function an(n){try{return hn(n)}catch(t){}}function un(n){if(n){var t=nn[n];t.refcount--,0!==t.refcount||t.rethrown||(t.destructor&&a.dynCall_vi(t.destructor,n),delete nn[n],an(n))}}function sn(){var n=on;if(!n)return 0|(x(0),0);var t=nn[n],e=t.type;if(!e)return 0|(x(0),n);var r=Array.prototype.slice.call(arguments);yn(e);D[468924]=n,n=1875696;for(var i=0;i<r.length;i++)if(r[i]&&mn(r[i],e,n))return n=D[n>>2],t.adjusted.push(n),0|(x(r[i]),n);return n=D[n>>2],0|(x(e),n)}a.___cxa_find_matching_catch=sn;var cn={buffers:[null,[],[]],printChar:function(n,t){var e=cn.buffers[n];0===t||10===t?((1===n?h:v)(S(e,0)),e.length=0):e.push(t)},varargs:0,get:function(n){return cn.varargs+=4,D[cn.varargs-4>>2]},getStr:function(){return k(cn.get())},get64:function(){var n=cn.get();cn.get();return n},getZero:function(){cn.get()}};function ln(){return R.length}function _n(n){n=L(n,65536);var t=E.byteLength;try{return-1!==b.grow((n-t)/65536)&&(E=b.buffer,!0)}catch(e){return!1}}var fn={abort:Bn,setTempRet0:x,getTempRet0:function(){return w},invoke_i:function(n){var t=xn();try{return An(n)}catch(e){if(wn(t),e!==e+0&&"longjmp"!==e)throw e;gn(1,0)}},invoke_ii:function(n,t){var e=xn();try{return jn(n,t)}catch(r){if(wn(e),r!==r+0&&"longjmp"!==r)throw r;gn(1,0)}},invoke_iii:function(n,t,e){var r=xn();try{return Cn(n,t,e)}catch(i){if(wn(r),i!==i+0&&"longjmp"!==i)throw i;gn(1,0)}},invoke_iiii:function(n,t,e,r){var i=xn();try{return Sn(n,t,e,r)}catch(o){if(wn(i),o!==o+0&&"longjmp"!==o)throw o;gn(1,0)}},invoke_iiiii:function(n,t,e,r,i){var o=xn();try{return kn(n,t,e,r,i)}catch(a){if(wn(o),a!==a+0&&"longjmp"!==a)throw a;gn(1,0)}},invoke_iiiiii:function(n,t,e,r,i,o){var a=xn();try{return En(n,t,e,r,i,o)}catch(u){if(wn(a),u!==u+0&&"longjmp"!==u)throw u;gn(1,0)}},invoke_ji:function(n,t){var e=xn();try{return Rn(n,t)}catch(r){if(wn(e),r!==r+0&&"longjmp"!==r)throw r;gn(1,0)}},invoke_v:function(n){var t=xn();try{Tn(n)}catch(e){if(wn(t),e!==e+0&&"longjmp"!==e)throw e;gn(1,0)}},invoke_vi:function(n,t){var e=xn();try{Dn(n,t)}catch(r){if(wn(e),r!==r+0&&"longjmp"!==r)throw r;gn(1,0)}},invoke_vii:function(n,t,e){var r=xn();try{Mn(n,t,e)}catch(i){if(wn(r),i!==i+0&&"longjmp"!==i)throw i;gn(1,0)}},invoke_viii:function(n,t,e,r){var i=xn();try{Ln(n,t,e,r)}catch(o){if(wn(i),o!==o+0&&"longjmp"!==o)throw o;gn(1,0)}},invoke_viiii:function(n,t,e,r,i){var o=xn();try{On(n,t,e,r,i)}catch(a){if(wn(o),a!==a+0&&"longjmp"!==a)throw a;gn(1,0)}},invoke_viiiii:function(n,t,e,r,i,o){var a=xn();try{Pn(n,t,e,r,i,o)}catch(u){if(wn(a),u!==u+0&&"longjmp"!==u)throw u;gn(1,0)}},invoke_viiiiiii:function(n,t,e,r,i,o,a,u){var s=xn();try{In(n,t,e,r,i,o,a,u)}catch(c){if(wn(s),c!==c+0&&"longjmp"!==c)throw c;gn(1,0)}},invoke_viij:function(n,t,e,r,i){var o=xn();try{Nn(n,t,e,r,i)}catch(a){if(wn(o),a!==a+0&&"longjmp"!==a)throw a;gn(1,0)}},invoke_viji:function(n,t,e,r,i){var o=xn();try{Fn(n,t,e,r,i)}catch(a){if(wn(o),a!==a+0&&"longjmp"!==a)throw a;gn(1,0)}},___assert_fail:function(n,t,e,r){Bn("Assertion failed: "+k(n)+", at: "+[t?k(t):"unknown filename",e,r?k(r):"unknown function"])},___cxa_allocate_exception:function(n){return vn(n)},___cxa_begin_catch:function(n){var t=nn[n];return t&&!t.caught&&(t.caught=!0,dn.uncaught_exceptions--),t&&(t.rethrown=!1),tn.push(n),en(rn(n)),n},___cxa_end_catch:function(){gn(0);var n=tn.pop();n&&(un(rn(n)),on=0)},___cxa_find_matching_catch:sn,___cxa_find_matching_catch_2:function(n,t){return sn(n,t)},___cxa_find_matching_catch_3:function(n,t,e){return sn(n,t,e)},___cxa_free_exception:an,___cxa_get_exception_ptr:function(n){return n},___cxa_pure_virtual:function(){throw A=!0,"Pure virtual function called!"},___cxa_throw:function(n,t,e){throw nn[n]={ptr:n,adjusted:[n],type:t,destructor:e,refcount:0,caught:!1,rethrown:!1},on=n,"uncaught_exception"in dn?dn.uncaught_exceptions++:dn.uncaught_exceptions=1,n},___cxa_uncaught_exceptions:function(){return dn.uncaught_exceptions},___exception_addRef:en,___exception_deAdjust:rn,___exception_decRef:un,___gxx_personality_v0:function(){},___lock:function(){},___resumeException:function(n){throw on||(on=n),n},___setErrNo:function(n){return a.___errno_location&&(D[a.___errno_location()>>2]=n),n},___syscall140:function(n,t){cn.varargs=t;try{return cn.getStreamFromFD(),cn.get(),cn.get(),cn.get(),cn.get(),0}catch(e){return"undefined"!==typeof FS&&e instanceof FS.ErrnoError||Bn(e),-e.errno}},___syscall146:function(n,t){cn.varargs=t;try{for(var e=cn.get(),r=cn.get(),i=cn.get(),o=0,a=0;a<i;a++){for(var u=D[r+8*a>>2],s=D[r+(8*a+4)>>2],c=0;c<s;c++)cn.printChar(e,T[u+c]);o+=s}return o}catch(l){return"undefined"!==typeof FS&&l instanceof FS.ErrnoError||Bn(l),-l.errno}},___syscall54:function(n,t){cn.varargs=t;try{return 0}catch(e){return"undefined"!==typeof FS&&e instanceof FS.ErrnoError||Bn(e),-e.errno}},___syscall6:function(n,t){cn.varargs=t;try{return cn.getStreamFromFD(),0}catch(e){return"undefined"!==typeof FS&&e instanceof FS.ErrnoError||Bn(e),-e.errno}},___unlock:function(){},__api_close_keyboard:function(){self.DApi.close_keyboard()},__api_open_keyboard:function(n,t,e,r,i){self.DApi.open_keyboard(n,t,e,r,i)},_abort:function(){a.abort()},_api_create_sound:function(n,t,e){self.DApi.create_sound(n,T.slice(t,t+e))},_api_create_sound_float:function(n,t,e,r,i){self.DApi.create_sound_raw(n,M.slice(t/4,t/4+e*r),e,r,i)},_api_delete_sound:function(n){self.DApi.delete_sound(n)},_api_draw_begin:function(){self.DApi.draw_begin()},_api_draw_belt:function(n){self.DApi.draw_belt(D.subarray(n/4,n/4+8))},_api_draw_blit:function(n,t,e,r,i){self.DApi.draw_blit(n,t,e,r,T.subarray(i,i+e*r*4))},_api_draw_clip_text:function(n,t,e,r){self.DApi.draw_clip_text(n,t,e,r)},_api_draw_end:function(){self.DApi.draw_end()},_api_draw_text:function(n,t,e,r){var i=T.indexOf(0,e),o=String.fromCharCode.apply(null,T.subarray(e,i));self.DApi.draw_text(n,t,o,r)},_api_duplicate_sound:function(n,t){self.DApi.duplicate_sound(n,t)},_api_exit_game:function(){self.DApi.exit_game()},_api_play_sound:function(n,t,e,r){self.DApi.play_sound(n,t,e,r)},_api_set_cursor:function(n,t){self.DApi.set_cursor(n,t)},_api_set_volume:function(n,t){self.DApi.set_volume(n,t)},_api_stop_sound:function(n){self.DApi.stop_sound(n)},_api_use_websocket:function(n){self.DApi.use_websocket(n)},_api_websocket_closed:function(){return self.DApi.websocket_closed()},_api_websocket_send:function(n,t){self.DApi.websocket_send(T.subarray(n,n+t))},_emscripten_asm_const_ii:function(n,t){return $[n](t)},_emscripten_get_heap_size:ln,_emscripten_memcpy_big:function(n,t,e){T.set(T.subarray(t,t+e),n)},_emscripten_resize_heap:function(n){var t=ln();if(n>2147418112)return!1;for(var e=Math.max(t,16777216);e<n;)e=e<=536870912?L(2*e,65536):Math.min(L((3*e+2147483648)/4,65536),2147418112);return!!_n(e)&&(O(),!0)},_exit:function(n){!function(n,t){t&&a.noExitRuntime&&0===n||(a.noExitRuntime||(A=!0,n,!0,a.onExit&&a.onExit(n)),a.quit(n,new Un(n)))}(n)},_exit_error:function(n){var t=T.indexOf(0,n),e=String.fromCharCode.apply(null,T.subarray(n,t));self.DApi.exit_error(e)},_get_file_contents:function(n,t,e,r){var i=T.indexOf(0,n),o=String.fromCharCode.apply(null,T.subarray(n,i));self.DApi.get_file_contents(o,T.subarray(t,t+r),e)},_get_file_size:function(n){var t=T.indexOf(0,n),e=String.fromCharCode.apply(null,T.subarray(n,t));return self.DApi.get_file_size(e)},_llvm_eh_typeid_for:function(n){return n},_llvm_trap:function(){Bn("trap!")},_put_file_contents:function(n,t,e){var r=T.indexOf(0,n),i=String.fromCharCode.apply(null,T.subarray(n,r));self.DApi.put_file_contents(i,T.slice(t,t+e))},_remove_file:function(n){var t=T.indexOf(0,n),e=String.fromCharCode.apply(null,T.subarray(n,t));self.DApi.remove_file(e)},_show_alert:function(n){var t=T.indexOf(0,n),e=String.fromCharCode.apply(null,T.subarray(n,t));self.alert(e)},_time:function(n){var t=Date.now()/1e3|0;return n&&(D[n>>2]=t),t},_trace_pop:function(){self.WASM_TRACE&&self.WASM_TRACE.pop()},_trace_push:function(n){var t=T.indexOf(0,n),e=String.fromCharCode.apply(null,T.subarray(n,t));console.log(e),self.WASM_TRACE=self.WASM_TRACE||[],self.WASM_TRACE.push(e)},abortOnCannotGrowMemory:function(n){Bn("OOM")},emscripten_realloc_buffer:_n,flush_NO_FILESYSTEM:function(){var n=a._fflush;n&&n(0);var t=cn.buffers;t[1].length&&cn.printChar(1,10),t[2].length&&cn.printChar(2,10)},tempDoublePtr:Q,DYNAMICTOP_PTR:P},pn=a.asm({},fn,E);a.asm=pn;a._DApi_AllocPacket=function(){return a.asm._DApi_AllocPacket.apply(null,arguments)},a._DApi_Char=function(){return a.asm._DApi_Char.apply(null,arguments)},a._DApi_Init=function(){return a.asm._DApi_Init.apply(null,arguments)},a._DApi_Key=function(){return a.asm._DApi_Key.apply(null,arguments)},a._DApi_Mouse=function(){return a.asm._DApi_Mouse.apply(null,arguments)},a._DApi_Render=function(){return a.asm._DApi_Render.apply(null,arguments)},a._DApi_SyncText=function(){return a.asm._DApi_SyncText.apply(null,arguments)},a._DApi_SyncTextPtr=function(){return a.asm._DApi_SyncTextPtr.apply(null,arguments)},a._SNet_InitWebsocket=function(){return a.asm._SNet_InitWebsocket.apply(null,arguments)},a._SNet_WebsocketStatus=function(){return a.asm._SNet_WebsocketStatus.apply(null,arguments)};var dn=a.__ZSt18uncaught_exceptionv=function(){return a.asm.__ZSt18uncaught_exceptionv.apply(null,arguments)},mn=a.___cxa_can_catch=function(){return a.asm.___cxa_can_catch.apply(null,arguments)},yn=a.___cxa_is_pointer_type=function(){return a.asm.___cxa_is_pointer_type.apply(null,arguments)},hn=(a.___em_js___api_close_keyboard=function(){return a.asm.___em_js___api_close_keyboard.apply(null,arguments)},a.___em_js___api_open_keyboard=function(){return a.asm.___em_js___api_open_keyboard.apply(null,arguments)},a.___em_js__api_create_sound=function(){return a.asm.___em_js__api_create_sound.apply(null,arguments)},a.___em_js__api_create_sound_float=function(){return a.asm.___em_js__api_create_sound_float.apply(null,arguments)},a.___em_js__api_delete_sound=function(){return a.asm.___em_js__api_delete_sound.apply(null,arguments)},a.___em_js__api_draw_begin=function(){return a.asm.___em_js__api_draw_begin.apply(null,arguments)},a.___em_js__api_draw_belt=function(){return a.asm.___em_js__api_draw_belt.apply(null,arguments)},a.___em_js__api_draw_blit=function(){return a.asm.___em_js__api_draw_blit.apply(null,arguments)},a.___em_js__api_draw_clip_text=function(){return a.asm.___em_js__api_draw_clip_text.apply(null,arguments)},a.___em_js__api_draw_end=function(){return a.asm.___em_js__api_draw_end.apply(null,arguments)},a.___em_js__api_draw_text=function(){return a.asm.___em_js__api_draw_text.apply(null,arguments)},a.___em_js__api_duplicate_sound=function(){return a.asm.___em_js__api_duplicate_sound.apply(null,arguments)},a.___em_js__api_exit_game=function(){return a.asm.___em_js__api_exit_game.apply(null,arguments)},a.___em_js__api_play_sound=function(){return a.asm.___em_js__api_play_sound.apply(null,arguments)},a.___em_js__api_set_cursor=function(){return a.asm.___em_js__api_set_cursor.apply(null,arguments)},a.___em_js__api_set_volume=function(){return a.asm.___em_js__api_set_volume.apply(null,arguments)},a.___em_js__api_stop_sound=function(){return a.asm.___em_js__api_stop_sound.apply(null,arguments)},a.___em_js__api_use_websocket=function(){return a.asm.___em_js__api_use_websocket.apply(null,arguments)},a.___em_js__api_websocket_closed=function(){return a.asm.___em_js__api_websocket_closed.apply(null,arguments)},a.___em_js__api_websocket_send=function(){return a.asm.___em_js__api_websocket_send.apply(null,arguments)},a.___em_js__exit_error=function(){return a.asm.___em_js__exit_error.apply(null,arguments)},a.___em_js__get_file_contents=function(){return a.asm.___em_js__get_file_contents.apply(null,arguments)},a.___em_js__get_file_size=function(){return a.asm.___em_js__get_file_size.apply(null,arguments)},a.___em_js__put_file_contents=function(){return a.asm.___em_js__put_file_contents.apply(null,arguments)},a.___em_js__remove_file=function(){return a.asm.___em_js__remove_file.apply(null,arguments)},a.___em_js__show_alert=function(){return a.asm.___em_js__show_alert.apply(null,arguments)},a.___em_js__trace_pop=function(){return a.asm.___em_js__trace_pop.apply(null,arguments)},a.___em_js__trace_push=function(){return a.asm.___em_js__trace_push.apply(null,arguments)},a._emscripten_replace_memory=function(){return a.asm._emscripten_replace_memory.apply(null,arguments)},a._free=function(){return a.asm._free.apply(null,arguments)}),vn=(a._llvm_bswap_i32=function(){return a.asm._llvm_bswap_i32.apply(null,arguments)},a._malloc=function(){return a.asm._malloc.apply(null,arguments)}),gn=(a._memcpy=function(){return a.asm._memcpy.apply(null,arguments)},a._memmove=function(){return a.asm._memmove.apply(null,arguments)},a._memset=function(){return a.asm._memset.apply(null,arguments)},a._sbrk=function(){return a.asm._sbrk.apply(null,arguments)},a._setThrew=function(){return a.asm._setThrew.apply(null,arguments)}),bn=(a.establishStackSpace=function(){return a.asm.establishStackSpace.apply(null,arguments)},a.globalCtors=function(){return a.asm.globalCtors.apply(null,arguments)}),wn=(a.stackAlloc=function(){return a.asm.stackAlloc.apply(null,arguments)},a.stackRestore=function(){return a.asm.stackRestore.apply(null,arguments)}),xn=a.stackSave=function(){return a.asm.stackSave.apply(null,arguments)},An=a.dynCall_i=function(){return a.asm.dynCall_i.apply(null,arguments)},jn=a.dynCall_ii=function(){return a.asm.dynCall_ii.apply(null,arguments)},Cn=(a.dynCall_iidiiii=function(){return a.asm.dynCall_iidiiii.apply(null,arguments)},a.dynCall_iii=function(){return a.asm.dynCall_iii.apply(null,arguments)}),Sn=a.dynCall_iiii=function(){return a.asm.dynCall_iiii.apply(null,arguments)},kn=a.dynCall_iiiii=function(){return a.asm.dynCall_iiiii.apply(null,arguments)},En=a.dynCall_iiiiii=function(){return a.asm.dynCall_iiiiii.apply(null,arguments)},Rn=a.dynCall_ji=function(){return a.asm.dynCall_ji.apply(null,arguments)},Tn=(a.dynCall_jiji=function(){return a.asm.dynCall_jiji.apply(null,arguments)},a.dynCall_v=function(){return a.asm.dynCall_v.apply(null,arguments)}),Dn=a.dynCall_vi=function(){return a.asm.dynCall_vi.apply(null,arguments)},Mn=a.dynCall_vii=function(){return a.asm.dynCall_vii.apply(null,arguments)},Ln=a.dynCall_viii=function(){return a.asm.dynCall_viii.apply(null,arguments)},On=a.dynCall_viiii=function(){return a.asm.dynCall_viiii.apply(null,arguments)},Pn=a.dynCall_viiiii=function(){return a.asm.dynCall_viiiii.apply(null,arguments)},In=(a.dynCall_viiiiii=function(){return a.asm.dynCall_viiiiii.apply(null,arguments)},a.dynCall_viiiiiii=function(){return a.asm.dynCall_viiiiiii.apply(null,arguments)}),Nn=(a.dynCall_viiiiiiiii=function(){return a.asm.dynCall_viiiiiiiii.apply(null,arguments)},a.dynCall_viiiiiiiiii=function(){return a.asm.dynCall_viiiiiiiiii.apply(null,arguments)},a.dynCall_viij=function(){return a.asm.dynCall_viij.apply(null,arguments)}),Fn=a.dynCall_viji=function(){return a.asm.dynCall_viji.apply(null,arguments)};function Un(n){this.name="ExitStatus",this.message="Program terminated with exit("+n+")",this.status=n}a.asm=pn,a.then=function(n){if(a.calledRun)n(a);else{var t=a.onRuntimeInitialized;a.onRuntimeInitialized=function(){t&&t(),n(a)}}return a},Un.prototype=new Error,Un.prototype.constructor=Un;function qn(n){function t(){a.calledRun||(a.calledRun=!0,A||(!0,N(U),N(q),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)W(a.postRun.shift());N(B)}()))}n=n||a.arguments,H>0||(!function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)n=a.preRun.shift(),F.unshift(n);var n;N(F)}(),H>0||a.calledRun||(a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),t()},1)):t()))}G=function n(){a.calledRun||qn(),a.calledRun||(G=n)},a.run=qn;function Bn(n){throw a.onAbort&&a.onAbort(n),h(n+=""),v(n),A=!0,1,"abort("+n+"). Build with -s ASSERTIONS=1 for more info."}if(a.abort=Bn,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return a.noExitRuntime=!0,qn(),a.ready=new Promise(function(n,t){delete a.then,a.onAbort=function(n){t(n)},W(function(){n(a)})}),i}}();n.exports=i}).call(this,e(2),"/")},function(n,t,e){n.exports=e.p+"static/media/DiabloSpawn.9c2373b2.wasm"},function(n,t,e){(function(t,r){var i=function(){var n="undefined"!==typeof document&&document.currentScript?document.currentScript.src:void 0;return function(i){var o,a="undefined"!==typeof(i=i||{})?i:{},u={};for(o in a)a.hasOwnProperty(o)&&(u[o]=a[o]);a.arguments=[],a.thisProgram="./this.program",a.quit=function(n,t){throw t},a.preRun=[],a.postRun=[];var s,c,l=!1,_=!1;l="object"===typeof window,_="function"===typeof importScripts,s="object"===typeof t&&"object"===typeof t.versions&&"string"===typeof t.versions.node&&!l&&!_,c=!l&&!s&&!_;var f,p,d,m,y="";s?(y=r+"/",f=function(n,t){var r;return d||(d=e(3)),m||(m=e(4)),n=m.normalize(n),r=d.readFileSync(n),t?r:r.toString()},p=function(n){var t=f(n,!0);return t.buffer||(t=new Uint8Array(t)),j(t.buffer),t},t.argv.length>1&&(a.thisProgram=t.argv[1].replace(/\\/g,"/")),a.arguments=t.argv.slice(2),t.on("uncaughtException",function(n){if(!(n instanceof Un))throw n}),t.on("unhandledRejection",Bn),a.quit=function(n){t.exit(n)},a.inspect=function(){return"[Emscripten Module object]"}):c?("undefined"!=typeof read&&(f=function(n){return read(n)}),p=function(n){var t;return"function"===typeof readbuffer?new Uint8Array(readbuffer(n)):(j("object"===typeof(t=read(n,"binary"))),t)},"undefined"!=typeof scriptArgs?a.arguments=scriptArgs:"undefined"!=typeof arguments&&(a.arguments=arguments),"function"===typeof quit&&(a.quit=function(n){quit(n)})):(l||_)&&(_?y=self.location.href:document.currentScript&&(y=document.currentScript.src),n&&(y=n),y=0!==y.indexOf("blob:")?y.substr(0,y.lastIndexOf("/")+1):"",f=function(n){var t=new XMLHttpRequest;return t.open("GET",n,!1),t.send(null),t.responseText},_&&(p=function(n){var t=new XMLHttpRequest;return t.open("GET",n,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),function(n,t,e){var r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):e()},r.onerror=e,r.send(null)});var h=a.print||("undefined"!==typeof console?console.log.bind(console):"undefined"!==typeof print?print:null),v=a.printErr||("undefined"!==typeof printErr?printErr:"undefined"!==typeof console&&console.warn.bind(console)||h);for(o in u)u.hasOwnProperty(o)&&(a[o]=u[o]);u=void 0;var g={"f64-rem":function(n,t){return n%t},debugger:function(){}};new Array(0);var b,w=0,x=function(n){w=n};"object"!==typeof WebAssembly&&v("no native wasm support detected");var A=!1;function j(n,t){n||Bn("Assertion failed: "+t)}var C="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;function S(n,t,e){for(var r=t+e,i=t;n[i]&&!(i>=r);)++i;if(i-t>16&&n.subarray&&C)return C.decode(n.subarray(t,i));for(var o="";t<i;){var a=n[t++];if(128&a){var u=63&n[t++];if(192!=(224&a)){var s=63&n[t++];if((a=224==(240&a)?(15&a)<<12|u<<6|s:(7&a)<<18|u<<12|s<<6|63&n[t++])<65536)o+=String.fromCharCode(a);else{var c=a-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&a)<<6|u)}else o+=String.fromCharCode(a)}return o}function k(n,t){return n?S(T,n,t):""}"undefined"!==typeof TextDecoder&&new TextDecoder("utf-16le");var E,R,T,D,M;function L(n,t){return n%t>0&&(n+=t-n%t),n}function O(){a.HEAP8=R=new Int8Array(E),a.HEAP16=new Int16Array(E),a.HEAP32=D=new Int32Array(E),a.HEAPU8=T=new Uint8Array(E),a.HEAPU16=new Uint16Array(E),a.HEAPU32=new Uint32Array(E),a.HEAPF32=M=new Float32Array(E),a.HEAPF64=new Float64Array(E)}var P=1850896,I=a.TOTAL_MEMORY||134217728;function N(n){for(;n.length>0;){var t=n.shift();if("function"!=typeof t){var e=t.func;"number"===typeof e?void 0===t.arg?a.dynCall_v(e):a.dynCall_vi(e,t.arg):e(void 0===t.arg?null:t.arg)}else t()}}I<5242880&&v("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+I+"! (TOTAL_STACK=5242880)"),(b=a.wasmMemory?a.wasmMemory:new WebAssembly.Memory({initial:I/65536}))&&(E=b.buffer),I=E.byteLength,O(),D[P>>2]=7093808;var F=[],U=[],q=[],B=[];function W(n){B.unshift(n)}Math.abs,Math.cos,Math.sin,Math.tan,Math.acos,Math.asin,Math.atan,Math.atan2,Math.exp,Math.log,Math.sqrt,Math.ceil,Math.floor,Math.pow,Math.imul,Math.fround,Math.round,Math.min,Math.max,Math.clz32,Math.trunc;var H=0,z=null,G=null;a.preloadedImages={},a.preloadedAudios={};var X="data:application/octet-stream;base64,";function K(n){return String.prototype.startsWith?n.startsWith(X):0===n.indexOf(X)}var Y,Z="DiabloSpawn.wasm";function J(){try{if(a.wasmBinary)return new Uint8Array(a.wasmBinary);if(p)return p(Z);throw"both async and sync fetching of the wasm failed"}catch(v){Bn(v)}}function V(n){var t={env:n,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:g};function e(n,t){var e=n.exports;a.asm=e,function(n){if(H--,a.monitorRunDependencies&&a.monitorRunDependencies(H),0==H&&(null!==z&&(clearInterval(z),z=null),G)){var t=G;G=null,t()}}()}function r(n){e(n.instance)}function i(n){return(a.wasmBinary||!l&&!_||"function"!==typeof fetch?new Promise(function(n,t){n(J())}):fetch(Z,{credentials:"same-origin"}).then(function(n){if(!n.ok)throw"failed to load wasm binary file at '"+Z+"'";return n.arrayBuffer()}).catch(function(){return J()})).then(function(n){return WebAssembly.instantiate(n,t)}).then(n,function(n){v("failed to asynchronously prepare wasm: "+n),Bn(n)})}if(H++,a.monitorRunDependencies&&a.monitorRunDependencies(H),a.instantiateWasm)try{return a.instantiateWasm(t,e)}catch(o){return v("Module.instantiateWasm callback failed with error: "+o),!1}return function(){if(a.wasmBinary||"function"!==typeof WebAssembly.instantiateStreaming||K(Z)||"function"!==typeof fetch)return i(r);fetch(Z,{credentials:"same-origin"}).then(function(n){return WebAssembly.instantiateStreaming(n,t).then(r,function(n){v("wasm streaming compile failed: "+n),v("falling back to ArrayBuffer instantiation"),i(r)})})}(),{}}K(Z)||(Y=Z,Z=a.locateFile?a.locateFile(Y,y):y+Y),a.asm=function(n,t,e){return t.memory=b,t.table=new WebAssembly.Table({initial:1116,maximum:1116,element:"anyfunc"}),t.__memory_base=1024,t.__table_base=0,V(t)};var $=[function(n){self.DApi.current_save_id(n)}];U.push({func:function(){bn()}});var Q=1850912;var nn={},tn=[];function en(n){n&&nn[n].refcount++}function rn(n){if(!n||nn[n])return n;for(var t in nn)for(var e=+t,r=nn[e].adjusted,i=r.length,o=0;o<i;o++)if(r[o]===n)return e;return n}var on=0;function an(n){try{return hn(n)}catch(t){}}function un(n){if(n){var t=nn[n];t.refcount--,0!==t.refcount||t.rethrown||(t.destructor&&a.dynCall_vi(t.destructor,n),delete nn[n],an(n))}}function sn(){var n=on;if(!n)return 0|(x(0),0);var t=nn[n],e=t.type;if(!e)return 0|(x(0),n);var r=Array.prototype.slice.call(arguments);yn(e);D[462720]=n,n=1850880;for(var i=0;i<r.length;i++)if(r[i]&&mn(r[i],e,n))return n=D[n>>2],t.adjusted.push(n),0|(x(r[i]),n);return n=D[n>>2],0|(x(e),n)}a.___cxa_find_matching_catch=sn;var cn={buffers:[null,[],[]],printChar:function(n,t){var e=cn.buffers[n];0===t||10===t?((1===n?h:v)(S(e,0)),e.length=0):e.push(t)},varargs:0,get:function(n){return cn.varargs+=4,D[cn.varargs-4>>2]},getStr:function(){return k(cn.get())},get64:function(){var n=cn.get();cn.get();return n},getZero:function(){cn.get()}};function ln(){return R.length}function _n(n){n=L(n,65536);var t=E.byteLength;try{return-1!==b.grow((n-t)/65536)&&(E=b.buffer,!0)}catch(e){return!1}}var fn={abort:Bn,setTempRet0:x,getTempRet0:function(){return w},invoke_i:function(n){var t=xn();try{return An(n)}catch(e){if(wn(t),e!==e+0&&"longjmp"!==e)throw e;gn(1,0)}},invoke_ii:function(n,t){var e=xn();try{return jn(n,t)}catch(r){if(wn(e),r!==r+0&&"longjmp"!==r)throw r;gn(1,0)}},invoke_iii:function(n,t,e){var r=xn();try{return Cn(n,t,e)}catch(i){if(wn(r),i!==i+0&&"longjmp"!==i)throw i;gn(1,0)}},invoke_iiii:function(n,t,e,r){var i=xn();try{return Sn(n,t,e,r)}catch(o){if(wn(i),o!==o+0&&"longjmp"!==o)throw o;gn(1,0)}},invoke_iiiii:function(n,t,e,r,i){var o=xn();try{return kn(n,t,e,r,i)}catch(a){if(wn(o),a!==a+0&&"longjmp"!==a)throw a;gn(1,0)}},invoke_iiiiii:function(n,t,e,r,i,o){var a=xn();try{return En(n,t,e,r,i,o)}catch(u){if(wn(a),u!==u+0&&"longjmp"!==u)throw u;gn(1,0)}},invoke_ji:function(n,t){var e=xn();try{return Rn(n,t)}catch(r){if(wn(e),r!==r+0&&"longjmp"!==r)throw r;gn(1,0)}},invoke_v:function(n){var t=xn();try{Tn(n)}catch(e){if(wn(t),e!==e+0&&"longjmp"!==e)throw e;gn(1,0)}},invoke_vi:function(n,t){var e=xn();try{Dn(n,t)}catch(r){if(wn(e),r!==r+0&&"longjmp"!==r)throw r;gn(1,0)}},invoke_vii:function(n,t,e){var r=xn();try{Mn(n,t,e)}catch(i){if(wn(r),i!==i+0&&"longjmp"!==i)throw i;gn(1,0)}},invoke_viii:function(n,t,e,r){var i=xn();try{Ln(n,t,e,r)}catch(o){if(wn(i),o!==o+0&&"longjmp"!==o)throw o;gn(1,0)}},invoke_viiii:function(n,t,e,r,i){var o=xn();try{On(n,t,e,r,i)}catch(a){if(wn(o),a!==a+0&&"longjmp"!==a)throw a;gn(1,0)}},invoke_viiiii:function(n,t,e,r,i,o){var a=xn();try{Pn(n,t,e,r,i,o)}catch(u){if(wn(a),u!==u+0&&"longjmp"!==u)throw u;gn(1,0)}},invoke_viiiiiii:function(n,t,e,r,i,o,a,u){var s=xn();try{In(n,t,e,r,i,o,a,u)}catch(c){if(wn(s),c!==c+0&&"longjmp"!==c)throw c;gn(1,0)}},invoke_viij:function(n,t,e,r,i){var o=xn();try{Nn(n,t,e,r,i)}catch(a){if(wn(o),a!==a+0&&"longjmp"!==a)throw a;gn(1,0)}},invoke_viji:function(n,t,e,r,i){var o=xn();try{Fn(n,t,e,r,i)}catch(a){if(wn(o),a!==a+0&&"longjmp"!==a)throw a;gn(1,0)}},___assert_fail:function(n,t,e,r){Bn("Assertion failed: "+k(n)+", at: "+[t?k(t):"unknown filename",e,r?k(r):"unknown function"])},___cxa_allocate_exception:function(n){return vn(n)},___cxa_begin_catch:function(n){var t=nn[n];return t&&!t.caught&&(t.caught=!0,dn.uncaught_exceptions--),t&&(t.rethrown=!1),tn.push(n),en(rn(n)),n},___cxa_end_catch:function(){gn(0);var n=tn.pop();n&&(un(rn(n)),on=0)},___cxa_find_matching_catch:sn,___cxa_find_matching_catch_2:function(n,t){return sn(n,t)},___cxa_find_matching_catch_3:function(n,t,e){return sn(n,t,e)},___cxa_free_exception:an,___cxa_get_exception_ptr:function(n){return n},___cxa_pure_virtual:function(){throw A=!0,"Pure virtual function called!"},___cxa_throw:function(n,t,e){throw nn[n]={ptr:n,adjusted:[n],type:t,destructor:e,refcount:0,caught:!1,rethrown:!1},on=n,"uncaught_exception"in dn?dn.uncaught_exceptions++:dn.uncaught_exceptions=1,n},___cxa_uncaught_exceptions:function(){return dn.uncaught_exceptions},___exception_addRef:en,___exception_deAdjust:rn,___exception_decRef:un,___gxx_personality_v0:function(){},___lock:function(){},___resumeException:function(n){throw on||(on=n),n},___setErrNo:function(n){return a.___errno_location&&(D[a.___errno_location()>>2]=n),n},___syscall140:function(n,t){cn.varargs=t;try{return cn.getStreamFromFD(),cn.get(),cn.get(),cn.get(),cn.get(),0}catch(e){return"undefined"!==typeof FS&&e instanceof FS.ErrnoError||Bn(e),-e.errno}},___syscall146:function(n,t){cn.varargs=t;try{for(var e=cn.get(),r=cn.get(),i=cn.get(),o=0,a=0;a<i;a++){for(var u=D[r+8*a>>2],s=D[r+(8*a+4)>>2],c=0;c<s;c++)cn.printChar(e,T[u+c]);o+=s}return o}catch(l){return"undefined"!==typeof FS&&l instanceof FS.ErrnoError||Bn(l),-l.errno}},___syscall54:function(n,t){cn.varargs=t;try{return 0}catch(e){return"undefined"!==typeof FS&&e instanceof FS.ErrnoError||Bn(e),-e.errno}},___syscall6:function(n,t){cn.varargs=t;try{return cn.getStreamFromFD(),0}catch(e){return"undefined"!==typeof FS&&e instanceof FS.ErrnoError||Bn(e),-e.errno}},___unlock:function(){},__api_close_keyboard:function(){self.DApi.close_keyboard()},__api_open_keyboard:function(n,t,e,r,i){self.DApi.open_keyboard(n,t,e,r,i)},_abort:function(){a.abort()},_api_create_sound:function(n,t,e){self.DApi.create_sound(n,T.slice(t,t+e))},_api_create_sound_float:function(n,t,e,r,i){self.DApi.create_sound_raw(n,M.slice(t/4,t/4+e*r),e,r,i)},_api_delete_sound:function(n){self.DApi.delete_sound(n)},_api_draw_begin:function(){self.DApi.draw_begin()},_api_draw_belt:function(n){self.DApi.draw_belt(D.subarray(n/4,n/4+8))},_api_draw_blit:function(n,t,e,r,i){self.DApi.draw_blit(n,t,e,r,T.subarray(i,i+e*r*4))},_api_draw_clip_text:function(n,t,e,r){self.DApi.draw_clip_text(n,t,e,r)},_api_draw_end:function(){self.DApi.draw_end()},_api_draw_text:function(n,t,e,r){var i=T.indexOf(0,e),o=String.fromCharCode.apply(null,T.subarray(e,i));self.DApi.draw_text(n,t,o,r)},_api_duplicate_sound:function(n,t){self.DApi.duplicate_sound(n,t)},_api_exit_game:function(){self.DApi.exit_game()},_api_play_sound:function(n,t,e,r){self.DApi.play_sound(n,t,e,r)},_api_set_cursor:function(n,t){self.DApi.set_cursor(n,t)},_api_set_volume:function(n,t){self.DApi.set_volume(n,t)},_api_stop_sound:function(n){self.DApi.stop_sound(n)},_api_use_websocket:function(n){self.DApi.use_websocket(n)},_api_websocket_closed:function(){return self.DApi.websocket_closed()},_api_websocket_send:function(n,t){self.DApi.websocket_send(T.subarray(n,n+t))},_emscripten_asm_const_ii:function(n,t){return $[n](t)},_emscripten_get_heap_size:ln,_emscripten_memcpy_big:function(n,t,e){T.set(T.subarray(t,t+e),n)},_emscripten_resize_heap:function(n){var t=ln();if(n>2147418112)return!1;for(var e=Math.max(t,16777216);e<n;)e=e<=536870912?L(2*e,65536):Math.min(L((3*e+2147483648)/4,65536),2147418112);return!!_n(e)&&(O(),!0)},_exit:function(n){!function(n,t){t&&a.noExitRuntime&&0===n||(a.noExitRuntime||(A=!0,n,!0,a.onExit&&a.onExit(n)),a.quit(n,new Un(n)))}(n)},_exit_error:function(n){var t=T.indexOf(0,n),e=String.fromCharCode.apply(null,T.subarray(n,t));self.DApi.exit_error(e)},_get_file_contents:function(n,t,e,r){var i=T.indexOf(0,n),o=String.fromCharCode.apply(null,T.subarray(n,i));self.DApi.get_file_contents(o,T.subarray(t,t+r),e)},_get_file_size:function(n){var t=T.indexOf(0,n),e=String.fromCharCode.apply(null,T.subarray(n,t));return self.DApi.get_file_size(e)},_llvm_eh_typeid_for:function(n){return n},_llvm_trap:function(){Bn("trap!")},_put_file_contents:function(n,t,e){var r=T.indexOf(0,n),i=String.fromCharCode.apply(null,T.subarray(n,r));self.DApi.put_file_contents(i,T.slice(t,t+e))},_remove_file:function(n){var t=T.indexOf(0,n),e=String.fromCharCode.apply(null,T.subarray(n,t));self.DApi.remove_file(e)},_show_alert:function(n){var t=T.indexOf(0,n),e=String.fromCharCode.apply(null,T.subarray(n,t));self.alert(e)},_time:function(n){var t=Date.now()/1e3|0;return n&&(D[n>>2]=t),t},_trace_pop:function(){self.WASM_TRACE&&self.WASM_TRACE.pop()},_trace_push:function(n){var t=T.indexOf(0,n),e=String.fromCharCode.apply(null,T.subarray(n,t));console.log(e),self.WASM_TRACE=self.WASM_TRACE||[],self.WASM_TRACE.push(e)},abortOnCannotGrowMemory:function(n){Bn("OOM")},emscripten_realloc_buffer:_n,flush_NO_FILESYSTEM:function(){var n=a._fflush;n&&n(0);var t=cn.buffers;t[1].length&&cn.printChar(1,10),t[2].length&&cn.printChar(2,10)},tempDoublePtr:Q,DYNAMICTOP_PTR:P},pn=a.asm({},fn,E);a.asm=pn;a._DApi_AllocPacket=function(){return a.asm._DApi_AllocPacket.apply(null,arguments)},a._DApi_Char=function(){return a.asm._DApi_Char.apply(null,arguments)},a._DApi_Init=function(){return a.asm._DApi_Init.apply(null,arguments)},a._DApi_Key=function(){return a.asm._DApi_Key.apply(null,arguments)},a._DApi_Mouse=function(){return a.asm._DApi_Mouse.apply(null,arguments)},a._DApi_Render=function(){return a.asm._DApi_Render.apply(null,arguments)},a._DApi_SyncText=function(){return a.asm._DApi_SyncText.apply(null,arguments)},a._DApi_SyncTextPtr=function(){return a.asm._DApi_SyncTextPtr.apply(null,arguments)},a._SNet_InitWebsocket=function(){return a.asm._SNet_InitWebsocket.apply(null,arguments)},a._SNet_WebsocketStatus=function(){return a.asm._SNet_WebsocketStatus.apply(null,arguments)};var dn=a.__ZSt18uncaught_exceptionv=function(){return a.asm.__ZSt18uncaught_exceptionv.apply(null,arguments)},mn=a.___cxa_can_catch=function(){return a.asm.___cxa_can_catch.apply(null,arguments)},yn=a.___cxa_is_pointer_type=function(){return a.asm.___cxa_is_pointer_type.apply(null,arguments)},hn=(a.___em_js___api_close_keyboard=function(){return a.asm.___em_js___api_close_keyboard.apply(null,arguments)},a.___em_js___api_open_keyboard=function(){return a.asm.___em_js___api_open_keyboard.apply(null,arguments)},a.___em_js__api_create_sound=function(){return a.asm.___em_js__api_create_sound.apply(null,arguments)},a.___em_js__api_create_sound_float=function(){return a.asm.___em_js__api_create_sound_float.apply(null,arguments)},a.___em_js__api_delete_sound=function(){return a.asm.___em_js__api_delete_sound.apply(null,arguments)},a.___em_js__api_draw_begin=function(){return a.asm.___em_js__api_draw_begin.apply(null,arguments)},a.___em_js__api_draw_belt=function(){return a.asm.___em_js__api_draw_belt.apply(null,arguments)},a.___em_js__api_draw_blit=function(){return a.asm.___em_js__api_draw_blit.apply(null,arguments)},a.___em_js__api_draw_clip_text=function(){return a.asm.___em_js__api_draw_clip_text.apply(null,arguments)},a.___em_js__api_draw_end=function(){return a.asm.___em_js__api_draw_end.apply(null,arguments)},a.___em_js__api_draw_text=function(){return a.asm.___em_js__api_draw_text.apply(null,arguments)},a.___em_js__api_duplicate_sound=function(){return a.asm.___em_js__api_duplicate_sound.apply(null,arguments)},a.___em_js__api_exit_game=function(){return a.asm.___em_js__api_exit_game.apply(null,arguments)},a.___em_js__api_play_sound=function(){return a.asm.___em_js__api_play_sound.apply(null,arguments)},a.___em_js__api_set_cursor=function(){return a.asm.___em_js__api_set_cursor.apply(null,arguments)},a.___em_js__api_set_volume=function(){return a.asm.___em_js__api_set_volume.apply(null,arguments)},a.___em_js__api_stop_sound=function(){return a.asm.___em_js__api_stop_sound.apply(null,arguments)},a.___em_js__api_use_websocket=function(){return a.asm.___em_js__api_use_websocket.apply(null,arguments)},a.___em_js__api_websocket_closed=function(){return a.asm.___em_js__api_websocket_closed.apply(null,arguments)},a.___em_js__api_websocket_send=function(){return a.asm.___em_js__api_websocket_send.apply(null,arguments)},a.___em_js__exit_error=function(){return a.asm.___em_js__exit_error.apply(null,arguments)},a.___em_js__get_file_contents=function(){return a.asm.___em_js__get_file_contents.apply(null,arguments)},a.___em_js__get_file_size=function(){return a.asm.___em_js__get_file_size.apply(null,arguments)},a.___em_js__put_file_contents=function(){return a.asm.___em_js__put_file_contents.apply(null,arguments)},a.___em_js__remove_file=function(){return a.asm.___em_js__remove_file.apply(null,arguments)},a.___em_js__show_alert=function(){return a.asm.___em_js__show_alert.apply(null,arguments)},a.___em_js__trace_pop=function(){return a.asm.___em_js__trace_pop.apply(null,arguments)},a.___em_js__trace_push=function(){return a.asm.___em_js__trace_push.apply(null,arguments)},a._emscripten_replace_memory=function(){return a.asm._emscripten_replace_memory.apply(null,arguments)},a._free=function(){return a.asm._free.apply(null,arguments)}),vn=(a._llvm_bswap_i32=function(){return a.asm._llvm_bswap_i32.apply(null,arguments)},a._malloc=function(){return a.asm._malloc.apply(null,arguments)}),gn=(a._memcpy=function(){return a.asm._memcpy.apply(null,arguments)},a._memmove=function(){return a.asm._memmove.apply(null,arguments)},a._memset=function(){return a.asm._memset.apply(null,arguments)},a._sbrk=function(){return a.asm._sbrk.apply(null,arguments)},a._setThrew=function(){return a.asm._setThrew.apply(null,arguments)}),bn=(a.establishStackSpace=function(){return a.asm.establishStackSpace.apply(null,arguments)},a.globalCtors=function(){return a.asm.globalCtors.apply(null,arguments)}),wn=(a.stackAlloc=function(){return a.asm.stackAlloc.apply(null,arguments)},a.stackRestore=function(){return a.asm.stackRestore.apply(null,arguments)}),xn=a.stackSave=function(){return a.asm.stackSave.apply(null,arguments)},An=a.dynCall_i=function(){return a.asm.dynCall_i.apply(null,arguments)},jn=a.dynCall_ii=function(){return a.asm.dynCall_ii.apply(null,arguments)},Cn=(a.dynCall_iidiiii=function(){return a.asm.dynCall_iidiiii.apply(null,arguments)},a.dynCall_iii=function(){return a.asm.dynCall_iii.apply(null,arguments)}),Sn=a.dynCall_iiii=function(){return a.asm.dynCall_iiii.apply(null,arguments)},kn=a.dynCall_iiiii=function(){return a.asm.dynCall_iiiii.apply(null,arguments)},En=a.dynCall_iiiiii=function(){return a.asm.dynCall_iiiiii.apply(null,arguments)},Rn=a.dynCall_ji=function(){return a.asm.dynCall_ji.apply(null,arguments)},Tn=(a.dynCall_jiji=function(){return a.asm.dynCall_jiji.apply(null,arguments)},a.dynCall_v=function(){return a.asm.dynCall_v.apply(null,arguments)}),Dn=a.dynCall_vi=function(){return a.asm.dynCall_vi.apply(null,arguments)},Mn=a.dynCall_vii=function(){return a.asm.dynCall_vii.apply(null,arguments)},Ln=a.dynCall_viii=function(){return a.asm.dynCall_viii.apply(null,arguments)},On=a.dynCall_viiii=function(){return a.asm.dynCall_viiii.apply(null,arguments)},Pn=a.dynCall_viiiii=function(){return a.asm.dynCall_viiiii.apply(null,arguments)},In=(a.dynCall_viiiiii=function(){return a.asm.dynCall_viiiiii.apply(null,arguments)},a.dynCall_viiiiiii=function(){return a.asm.dynCall_viiiiiii.apply(null,arguments)}),Nn=(a.dynCall_viiiiiiiii=function(){return a.asm.dynCall_viiiiiiiii.apply(null,arguments)},a.dynCall_viiiiiiiiii=function(){return a.asm.dynCall_viiiiiiiiii.apply(null,arguments)},a.dynCall_viij=function(){return a.asm.dynCall_viij.apply(null,arguments)}),Fn=a.dynCall_viji=function(){return a.asm.dynCall_viji.apply(null,arguments)};function Un(n){this.name="ExitStatus",this.message="Program terminated with exit("+n+")",this.status=n}a.asm=pn,a.then=function(n){if(a.calledRun)n(a);else{var t=a.onRuntimeInitialized;a.onRuntimeInitialized=function(){t&&t(),n(a)}}return a},Un.prototype=new Error,Un.prototype.constructor=Un;function qn(n){function t(){a.calledRun||(a.calledRun=!0,A||(!0,N(U),N(q),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)W(a.postRun.shift());N(B)}()))}n=n||a.arguments,H>0||(!function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)n=a.preRun.shift(),F.unshift(n);var n;N(F)}(),H>0||a.calledRun||(a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),t()},1)):t()))}G=function n(){a.calledRun||qn(),a.calledRun||(G=n)},a.run=qn;function Bn(n){throw a.onAbort&&a.onAbort(n),h(n+=""),v(n),A=!0,1,"abort("+n+"). Build with -s ASSERTIONS=1 for more info."}if(a.abort=Bn,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return a.noExitRuntime=!0,qn(),a.ready=new Promise(function(n,t){delete a.then,a.onAbort=function(n){t(n)},W(function(){n(a)})}),i}}();n.exports=i}).call(this,e(2),"/")},function(n,t,e){n.exports=e(19)},function(n,t,e){var r=function(n){"use strict";var t,e=Object.prototype,r=e.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(n,t,e,r){var i=t&&t.prototype instanceof m?t:m,o=Object.create(i.prototype),a=new k(r||[]);return o._invoke=function(n,t,e){var r=l;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return R()}for(e.method=i,e.arg=o;;){var a=e.delegate;if(a){var u=j(a,e);if(u){if(u===d)continue;return u}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(r===l)throw r=p,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r=f;var s=c(n,t,e);if("normal"===s.type){if(r=e.done?p:_,s.arg===d)continue;return{value:s.arg,done:e.done}}"throw"===s.type&&(r=p,e.method="throw",e.arg=s.arg)}}}(n,e,a),o}function c(n,t,e){try{return{type:"normal",arg:n.call(t,e)}}catch(r){return{type:"throw",arg:r}}}n.wrap=s;var l="suspendedStart",_="suspendedYield",f="executing",p="completed",d={};function m(){}function y(){}function h(){}var v={};v[o]=function(){return this};var g=Object.getPrototypeOf,b=g&&g(g(E([])));b&&b!==e&&r.call(b,o)&&(v=b);var w=h.prototype=m.prototype=Object.create(v);function x(n){["next","throw","return"].forEach(function(t){n[t]=function(n){return this._invoke(t,n)}})}function A(n){var t;this._invoke=function(e,i){function o(){return new Promise(function(t,o){!function t(e,i,o,a){var u=c(n[e],n,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"===typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then(function(n){t("next",n,o,a)},function(n){t("throw",n,o,a)}):Promise.resolve(l).then(function(n){s.value=n,o(s)},function(n){return t("throw",n,o,a)})}a(u.arg)}(e,i,t,o)})}return t=t?t.then(o,o):o()}}function j(n,e){var r=n.iterator[e.method];if(r===t){if(e.delegate=null,"throw"===e.method){if(n.iterator.return&&(e.method="return",e.arg=t,j(n,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=c(r,n.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var o=i.arg;return o?o.done?(e[n.resultName]=o.value,e.next=n.nextLoc,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function C(n){var t={tryLoc:n[0]};1 in n&&(t.catchLoc=n[1]),2 in n&&(t.finallyLoc=n[2],t.afterLoc=n[3]),this.tryEntries.push(t)}function S(n){var t=n.completion||{};t.type="normal",delete t.arg,n.completion=t}function k(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(C,this),this.reset(!0)}function E(n){if(n){var e=n[o];if(e)return e.call(n);if("function"===typeof n.next)return n;if(!isNaN(n.length)){var i=-1,a=function e(){for(;++i<n.length;)if(r.call(n,i))return e.value=n[i],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}return{next:R}}function R(){return{value:t,done:!0}}return y.prototype=w.constructor=h,h.constructor=y,h[u]=y.displayName="GeneratorFunction",n.isGeneratorFunction=function(n){var t="function"===typeof n&&n.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,h):(n.__proto__=h,u in n||(n[u]="GeneratorFunction")),n.prototype=Object.create(w),n},n.awrap=function(n){return{__await:n}},x(A.prototype),A.prototype[a]=function(){return this},n.AsyncIterator=A,n.async=function(t,e,r,i){var o=new A(s(t,e,r,i));return n.isGeneratorFunction(e)?o:o.next().then(function(n){return n.done?n.value:o.next()})},x(w),w[u]="Generator",w[o]=function(){return this},w.toString=function(){return"[object Generator]"},n.keys=function(n){var t=[];for(var e in n)t.push(e);return t.reverse(),function e(){for(;t.length;){var r=t.pop();if(r in n)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=E,k.prototype={constructor:k,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!n)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var e=this;function i(r,i){return u.type="throw",u.arg=n,e.next=r,i&&(e.method="next",e.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(n,t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===n||"continue"===n)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=n,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),d},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.finallyLoc===n)return this.complete(e.completion,e.afterLoc),S(e),d}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.tryLoc===n){var r=e.completion;if("throw"===r.type){var i=r.arg;S(e)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(n,e,r){return this.delegate={iterator:E(n),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=t),d}},n}(n.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},function(n,t,e){"use strict";var r=e(0),i=e(5),o=e(21),a=e(11);function u(n){var t=new o(n),e=i(o.prototype.request,t);return r.extend(e,o.prototype,t),r.extend(e,t),e}var s=u(e(8));s.Axios=o,s.create=function(n){return u(a(s.defaults,n))},s.Cancel=e(12),s.CancelToken=e(33),s.isCancel=e(7),s.all=function(n){return Promise.all(n)},s.spread=e(34),n.exports=s,n.exports.default=s},function(n,t){n.exports=function(n){return null!=n&&null!=n.constructor&&"function"===typeof n.constructor.isBuffer&&n.constructor.isBuffer(n)}},function(n,t,e){"use strict";var r=e(0),i=e(6),o=e(22),a=e(23),u=e(11);function s(n){this.defaults=n,this.interceptors={request:new o,response:new o}}s.prototype.request=function(n){"string"===typeof n?(n=arguments[1]||{}).url=arguments[0]:n=n||{},(n=u(this.defaults,n)).method=n.method?n.method.toLowerCase():"get";var t=[a,void 0],e=Promise.resolve(n);for(this.interceptors.request.forEach(function(n){t.unshift(n.fulfilled,n.rejected)}),this.interceptors.response.forEach(function(n){t.push(n.fulfilled,n.rejected)});t.length;)e=e.then(t.shift(),t.shift());return e},s.prototype.getUri=function(n){return n=u(this.defaults,n),i(n.url,n.params,n.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],function(n){s.prototype[n]=function(t,e){return this.request(r.merge(e||{},{method:n,url:t}))}}),r.forEach(["post","put","patch"],function(n){s.prototype[n]=function(t,e,i){return this.request(r.merge(i||{},{method:n,url:t,data:e}))}}),n.exports=s},function(n,t,e){"use strict";var r=e(0);function i(){this.handlers=[]}i.prototype.use=function(n,t){return this.handlers.push({fulfilled:n,rejected:t}),this.handlers.length-1},i.prototype.eject=function(n){this.handlers[n]&&(this.handlers[n]=null)},i.prototype.forEach=function(n){r.forEach(this.handlers,function(t){null!==t&&n(t)})},n.exports=i},function(n,t,e){"use strict";var r=e(0),i=e(24),o=e(7),a=e(8),u=e(31),s=e(32);function c(n){n.cancelToken&&n.cancelToken.throwIfRequested()}n.exports=function(n){return c(n),n.baseURL&&!u(n.url)&&(n.url=s(n.baseURL,n.url)),n.headers=n.headers||{},n.data=i(n.data,n.headers,n.transformRequest),n.headers=r.merge(n.headers.common||{},n.headers[n.method]||{},n.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(t){delete n.headers[t]}),(n.adapter||a.adapter)(n).then(function(t){return c(n),t.data=i(t.data,t.headers,n.transformResponse),t},function(t){return o(t)||(c(n),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,n.transformResponse))),Promise.reject(t)})}},function(n,t,e){"use strict";var r=e(0);n.exports=function(n,t,e){return r.forEach(e,function(e){n=e(n,t)}),n}},function(n,t,e){"use strict";var r=e(0);n.exports=function(n,t){r.forEach(n,function(e,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(n[t]=e,delete n[r])})}},function(n,t,e){"use strict";var r=e(10);n.exports=function(n,t,e){var i=e.config.validateStatus;!i||i(e.status)?n(e):t(r("Request failed with status code "+e.status,e.config,null,e.request,e))}},function(n,t,e){"use strict";n.exports=function(n,t,e,r,i){return n.config=t,e&&(n.code=e),n.request=r,n.response=i,n.isAxiosError=!0,n.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},n}},function(n,t,e){"use strict";var r=e(0),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];n.exports=function(n){var t,e,o,a={};return n?(r.forEach(n.split("\n"),function(n){if(o=n.indexOf(":"),t=r.trim(n.substr(0,o)).toLowerCase(),e=r.trim(n.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([e]):a[t]?a[t]+", "+e:e}}),a):a}},function(n,t,e){"use strict";var r=e(0);n.exports=r.isStandardBrowserEnv()?function(){var n,t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");function i(n){var r=n;return t&&(e.setAttribute("href",r),r=e.href),e.setAttribute("href",r),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return n=i(window.location.href),function(t){var e=r.isString(t)?i(t):t;return e.protocol===n.protocol&&e.host===n.host}}():function(){return!0}},function(n,t,e){"use strict";var r=e(0);n.exports=r.isStandardBrowserEnv()?{write:function(n,t,e,i,o,a){var u=[];u.push(n+"="+encodeURIComponent(t)),r.isNumber(e)&&u.push("expires="+new Date(e).toGMTString()),r.isString(i)&&u.push("path="+i),r.isString(o)&&u.push("domain="+o),!0===a&&u.push("secure"),document.cookie=u.join("; ")},read:function(n){var t=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(n,t,e){"use strict";n.exports=function(n){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(n)}},function(n,t,e){"use strict";n.exports=function(n,t){return t?n.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):n}},function(n,t,e){"use strict";var r=e(12);function i(n){if("function"!==typeof n)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(n){t=n});var e=this;n(function(n){e.reason||(e.reason=new r(n),t(e.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var n;return{token:new i(function(t){n=t}),cancel:n}},n.exports=i},function(n,t,e){"use strict";n.exports=function(n){return function(t){return n.apply(null,t)}}},function(n,t,e){"use strict";function r(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=[],r=!0,i=!1,o=void 0;try{for(var a,u=n[Symbol.iterator]();!(r=(a=u.next()).done)&&(e.push(a.value),!t||e.length!==t);r=!0);}catch(s){i=!0,o=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return e}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}e.r(t);var i=e(1),o=e.n(i);function a(n){return function(n){if(Array.isArray(n)){for(var t=0,e=new Array(n.length);t<n.length;t++)e[t]=n[t];return e}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(n,t,e,r,i,o,a){try{var u=n[o](a),s=u.value}catch(c){return void e(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function s(n){return function(){var t=this,e=arguments;return new Promise(function(r,i){var o=n.apply(t,e);function a(n){u(o,r,i,a,s,"next",n)}function s(n){u(o,r,i,a,s,"throw",n)}a(void 0)})}}function c(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var l=e(13),_=e.n(l),f=e(14),p=e.n(f),d=e(15),m=e.n(d),y=e(16),h=e.n(y),v=e(17),g=e.n(v);function b(){return(b=s(o.a.mark(function n(t,e){var r,i,a,u;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(r=new WebSocket(t)).binaryType="arraybuffer",i=null,r.addEventListener("message",function(n){var t=n.data;i&&i(t),e(t)}),n.next=6,new Promise(function(n,t){var e=function(n){return t(1)};r.addEventListener("error",e),r.addEventListener("open",function(){r.removeEventListener("error",e),n()})});case 6:return n.next=8,new Promise(function(n,t){var e=setTimeout(function(){i=null,t(1)},5e3);i=function(r){clearTimeout(e);var o=new Uint8Array(r);50===o[0]&&(i=null,1===(o[1]|o[2]<<8|o[3]<<16|o[4]<<24)?n():t(2))}});case 8:return a="1.0.39".match(/(\d+)\.(\d+)\.(\d+)/),(u=new Uint8Array(5))[0]=49,u[1]=parseInt(a[3]),u[2]=parseInt(a[2]),u[3]=parseInt(a[1]),u[4]=0,r.send(u),n.abrupt("return",r);case 17:case"end":return n.stop()}},n)}))).apply(this,arguments)}function w(n,t,e){var r=null,i=[],o=null,a={get readyState(){return r?r.readyState:0},send:function(n){i.push(n.slice())},close:function(){o&&(clearInterval(o),o=null),r?r.close():i=null}};return function(n,t){return b.apply(this,arguments)}(n,t).then(function(n){r=n,i?o=setInterval(function(){if(i.length){var n=i.reduce(function(n,t){return n+t.byteLength},3),t=new Uint8Array(n);t[0]=0,t[1]=255&i.length,t[2]=i.length>>8;var e=3,o=!0,a=!1,u=void 0;try{for(var s,c=i[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=s.value;t.set(l,e),e+=l.byteLength}}catch(_){a=!0,u=_}finally{try{o||null==c.return||c.return()}finally{if(a)throw u}}r.send(t),i.length=0}},100):r.close(),e(0)},function(n){e(n)}),a}var x=1466809,A=1337416,j=self,C=null,S=null,k=null,E=null,R=null,T=null,D=!1,M=null;function L(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";n instanceof Error?j.postMessage({action:t,error:n.toString(),stack:n.stack}):j.postMessage({action:t,error:n.toString()})}var O=1<<20,P=function(){function n(t){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var e=new XMLHttpRequest;if(e.open("HEAD",t,!1),e.send(),e.status<200||e.status>=300)throw Error("Failed to load remote file");this.byteLength=parseInt(e.getResponseHeader("Content-Length")),this.url=t,this.buffer=new Uint8Array(this.byteLength),this.chunks=new Uint8Array(this.byteLength+O-1>>20|0)}var t,e,r;return t=n,(e=[{key:"subarray",value:function(n,t){for(var e=n/O|0,r=(t+O-1)/O|0,i=r,o=e,a=e;a<r;++a)this.chunks[a]||(i=Math.min(i,a),o=Math.max(o,a));if(i<=o){var u=new XMLHttpRequest;if(u.open("GET",this.url,!1),u.setRequestHeader("Range","bytes=".concat(i*O,"-").concat(Math.min(o*O+O-1,this.byteLength-1))),u.responseType="arraybuffer",u.send(),u.status<200||u.status>=300)throw Error("Failed to load remote file");var s,c=u.getResponseHeader("Content-Range"),l=0;c&&(s=c.match(/bytes (\d+)-(\d+)\/(\d+)/))&&(l=parseInt(s[1])),this.buffer.set(new Uint8Array(u.response),l),e=(l+O-1)/O|0,r=(l+u.response.byteLength+O-1)/O|0;for(var _=e;_<r;++_)this.chunks[_]=1}return this.buffer.subarray(n,t)}}])&&c(t.prototype,e),r&&c(t,r),n}(),I={exit_error:function(n){throw Error(n)},exit_game:function(){j.postMessage({action:"exit"})},current_save_id:function(n){j.postMessage({action:"current_save",name:n>=0?D?"spawn".concat(n,".sv"):"single_".concat(n,".sv"):null})},get_file_size:function(n){var t=E.get(n.toLowerCase());return t?t.byteLength:0},get_file_contents:function(n,t,e){var r=E.get(n.toLowerCase());r&&t.set(r.subarray(e,e+t.byteLength))},put_file_contents:function(n,t){n=n.toLowerCase(),E.set(n,t),j.postMessage({action:"fs",func:"update",params:[n,t]})},remove_file:function(n){n=n.toLowerCase(),E.delete(n),j.postMessage({action:"fs",func:"delete",params:[n]})},set_cursor:function(n,t){j.postMessage({action:"cursor",x:n,y:t})},open_keyboard:function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];j.postMessage({action:"keyboard",rect:[].concat(t)})},close_keyboard:function(){j.postMessage({action:"keyboard",rect:null})},use_websocket:function(n){if(n)if(M&&1===M.readyState)X("SNet_WebsocketStatus",0);else var t=M=w("wss://diablo.rivsoft.net/websocket",function(n){M===t&&G(function(){var t=z._DApi_AllocPacket(n.byteLength);z.HEAPU8.set(new Uint8Array(n),t)})},function(n){if("number"!==typeof n)throw n;X("SNet_WebsocketStatus",n)});else M&&M.close(),M=null},websocket_closed:function(){return!!M&&1!==M.readyState}},N={draw_begin:function(){R={images:[],text:[],clip:null,belt:T},T=null},draw_blit:function(n,t,e,r,i){R.images.push({x:n,y:t,w:e,h:r,data:i.slice()})},draw_clip_text:function(n,t,e,r){R.clip={x0:n,y0:t,x1:e,y1:r}},draw_text:function(n,t,e,r){R.text.push({x:n,y:t,text:e,color:r})},draw_end:function(){var n=R.images.map(function(n){return n.data.buffer});R.belt&&n.push(R.belt.buffer),j.postMessage({action:"render",batch:R},n),R=null},draw_belt:function(n){T=n.slice()}},F={draw_begin:function(){S.save(),S.font="bold 13px Times New Roman"},draw_blit:function(n,t,e,r,i){k.data.set(i),S.putImageData(k,n,t)},draw_clip_text:function(n,t,e,r){S.beginPath(),S.rect(n,t,e-n,r-t),S.clip()},draw_text:function(n,t,e,r){var i=r>>16&255,o=r>>8&255,a=255&r;S.fillStyle="rgb(".concat(i,", ").concat(o,", ").concat(a,")"),S.fillText(e,n,t+22)},draw_end:function(){S.restore();var n=C.transferToImageBitmap(),t=[n];T&&t.push(T.buffer),j.postMessage({action:"render",batch:{bitmap:n,belt:T}},t),T=null},draw_belt:function(n){T=n.slice()}},U=null,q=null,B=0,W=0;["create_sound_raw","create_sound","duplicate_sound"].forEach(function(n){I[n]=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(U)W=e[0]+1,U.push({func:n,params:e}),"duplicate_sound"!==n&&q.push(e[1].buffer);else{B=e[0]+1;var i=[];"duplicate_sound"!==n&&i.push(e[1].buffer),j.postMessage({action:"audio",func:n,params:e},i)}}}),["play_sound","set_volume","stop_sound","delete_sound"].forEach(function(n){I[n]=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];U&&e[0]>=B?U.push({func:n,params:e}):j.postMessage({action:"audio",func:n,params:e})}});var H=null;I.websocket_send=function(n){M?M.send(n):H?H.push(n.slice().buffer):j.postMessage({action:"packet",buffer:n})},j.DApi=I;var z=null;function G(n){try{n()}catch(t){L(t)}}function X(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];G(function(){var t=null!=U;if(t||(U=[],q=[],H=[]),"text"!==n){var r;(r=z)["_"+n].apply(r,e)}else{for(var i=z._DApi_SyncTextPtr(),o=e[0],a=Math.min(o.length,255),u=z.HEAPU8,s=0;s<a;++s)u[i+s]=o.charCodeAt(s);u[i+a]=0,z._DApi_SyncText(e[1])}t||(U.length&&(B=W,j.postMessage({action:"audioBatch",batch:U},q)),H.length&&j.postMessage({action:"packetBatch",batch:H},H),U=null,q=null,H=null)})}function K(n,t,e){j.postMessage({action:"progress",text:n,loaded:t,total:e})}var Y=function(n,t){return new Promise(function(e,r){var i=new FileReader;i.onload=function(){t&&t({loaded:n.size}),e(i.result)},i.onerror=function(){return r(i.error)},i.onabort=function(){return r()},t&&i.addEventListener("progress",t),i.readAsArrayBuffer(n)})};function Z(n,t){return J.apply(this,arguments)}function J(){return(J=s(o.a.mark(function n(t,e){var r,i;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.a.request({url:t?m.a:_.a,responseType:"arraybuffer",onDownloadProgress:e});case 2:return r=n.sent,n.next=5,(t?h.a:p.a)({wasmBinary:r.data}).ready;case 5:return i=n.sent,e({loaded:2e6}),n.abrupt("return",i);case 8:case"end":return n.stop()}},n)}))).apply(this,arguments)}function V(){return(V=s(o.a.mark(function n(t,e,i){var a,u,s,c,l,_,f,p,d,m,y,h;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return f=function(){K("Loading...",u+c*_,s+l*_)},D=e,i?(C=new OffscreenCanvas(640,480),S=C.getContext("2d"),k=S.createImageData(640,480),Object.assign(I,F)):Object.assign(I,N),t||(a=e?"spawn.mpq":"diabdat.mpq",E.has(a)||E.set(a,new P("".concat("/diabloweb","/").concat(a)))),K("Loading..."),u=0,s=t?t.size:0,c=0,l=e?A:x,_=5,p=Z(e,function(n){c=Math.min(n.loaded,l),f()}),d=t?Y(t,function(n){u=n.loaded,f()}):Promise.resolve(null),n.next=11,Promise.all([p,d]);case 11:m=n.sent,y=r(m,2),z=y[0],(t=y[1])&&E.set(e?"spawn.mpq":"diabdat.mpq",new Uint8Array(t)),K("Initializing..."),h="1.0.39".match(/(\d+)\.(\d+)\.(\d+)/),z._DApi_Init(Math.floor(performance.now()),i?1:0,parseInt(h[1]),parseInt(h[2]),parseInt(h[3])),setInterval(function(){X("DApi_Render",Math.floor(performance.now()))},50);case 20:case"end":return n.stop()}},n)}))).apply(this,arguments)}j.addEventListener("message",function(n){var t=n.data;switch(t.action){case"init":E=t.files,function(n,t,e){return V.apply(this,arguments)}(t.mpq,t.spawn,t.offscreen).then(function(){return j.postMessage({action:"loaded"})},function(n){return L(n,"failed")});break;case"event":X.apply(void 0,[t.func].concat(a(t.params)));break;case"packet":G(function(){var n=z._DApi_AllocPacket(t.buffer.byteLength);z.HEAPU8.set(new Uint8Array(t.buffer),n)});break;case"packetBatch":G(function(){var n=!0,e=!1,r=void 0;try{for(var i,o=t.batch[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,u=z._DApi_AllocPacket(a.byteLength);z.HEAPU8.set(new Uint8Array(a),u)}}catch(s){e=!0,r=s}finally{try{n||null==o.return||o.return()}finally{if(e)throw r}}})}})}]);
//# sourceMappingURL=d2271be9a67638d3642f.worker.js.map